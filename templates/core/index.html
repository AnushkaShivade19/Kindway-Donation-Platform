{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}

{% block content %}
<style>
    /* Styles for the comprehensive homepage layout */
    .section { padding: 5rem 0; }
    .section-bg { background-color: var(--light-bg); }
    .section-title { font-size: 2.8rem; font-weight: 700; color: var(--primary-green); }
    .section-subtitle { font-size: 1.2rem; color: var(--secondary-text); }

    /* Hero Section */
    .hero-section {
        background: linear-gradient(rgba(0, 0, 0, 0.45), rgba(0, 0, 0, 0.45)), url("{% static 'images/heading.jpg' %}");
        background-size: cover; background-position: center; color: var(--white);
        padding: 8rem 0; text-align: center;
    }
    .hero-section h1 { font-size: 3.8rem; font-weight: 700; text-shadow: 2px 2px 5px rgba(0,0,0,0.3); }

    /* Mission Section Image Grid */
    .mission-image-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    .mission-image-grid img { width: 100%; height: 180px; object-fit: cover; border-radius: 12px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
    
    /* Stats Section */
    .stat-item { text-align: center; }
    .stat-item i { font-size: 3rem; color: var(--primary-green); margin-bottom: 1rem; }
    .stat-item h3 { font-size: 2.5rem; font-weight: 700; }
    .stat-item p { color: var(--secondary-text); font-size: 1.1rem; }

    /* How It Works */
    .how-it-works-card {
        text-align: center; padding: 2.5rem; border-radius: 16px; background-color: var(--white);
        box-shadow: 0 8px 30px rgba(0,0,0,0.06); height: 100%; transition: transform 0.3s ease;
    }
    .how-it-works-card:hover { transform: translateY(-10px); }
    .step-image { height: 250px; width: 100%; object-fit: cover; border-radius: 12px; margin-bottom: 1.5rem; box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
    
    /* NGO of the Month Section */
    .ngo-of-the-month { background-color: var(--dark-green); color: var(--white); }
    .ngo-of-the-month .stat h3 { font-size: 2.5rem; font-weight: 700; color: var(--accent-orange); }

    /* Video Section */
    .video-section video { width: 100%; height: 100%; min-height: 400px; object-fit: cover; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); }

    /* Events Section */
    .event-card .card-date { background-color: var(--primary-green); color: white; border-radius: 8px; padding: 0.5rem 1rem; text-align: center; }
    .event-card .card-date .day { font-size: 1.8rem; font-weight: 700; line-height: 1; }
    .event-card .card-date .month { font-size: 0.9rem; text-transform: uppercase; }
    
    /* FAQ Section */
    .faq-section .accordion-button:not(.collapsed) { color: var(--dark-text); background-color: #e7f1ff; }
    .faq-section .accordion-button:focus { box-shadow: none; }

    /* Story Card */
    .story-card img { height: 250px; object-fit: cover; }
    
    /* CTA Section */
    .cta-final-section { background: var(--primary-green); color: var(--white); }

    .where-we-operate ul { list-style: none; padding-left: 0; }
    .where-we-operate li { margin-bottom: 1rem; font-size: 1.1rem; }
    .where-we-operate i { color: var(--primary-green); }
</style>

<!-- 1. Hero Section -->
<div class="hero-section">
    <div class="container animate-on-scroll">
        <h1>Give Your Items a Second Life.</h1>
        <p class="fs-4 col-md-8 mx-auto mt-3">Connect with verified NGOs and turn your unused goods into meaningful impact.</p>
        <div class="mt-4"><a href="{% url 'offer_donation_flow' %}" class="btn btn-accent btn-lg me-md-3 mb-3 mb-md-0">Donate Now</a><a href="#how-it-works" class="btn btn-outline-light btn-lg">Learn How</a></div>
    </div>
</div>

<!-- 2. "Our Mission" Section with Image Grid -->
<div class="section section-bg animate-on-scroll">
    <div class="container">
        <div class="row align-items-center g-5">
            <div class="col-lg-6">
                <h2 class="section-title mb-4">Our Mission: Connecting Kindness with Need</h2>
                <p class="fs-5 text-secondary">Kindway believes every unused item holds potential for change. We bridge the gap between your generosity and verified NGOs, ensuring your donations make a real difference in your community.</p>
                <a href="{% url 'about_us' %}" class="btn btn-primary btn-lg mt-4">Learn More About Us</a>
            </div>
            <div class="col-lg-6">
                <div class="mission-image-grid">
                    <img src="{% static 'images/charity.png' %}" alt="Charity volunteers">
                    <img src="{% static 'images/sustainable.jpg' %}" alt="Sustainability">
                    <img src="{% static 'images/upcycle.jpg' %}" alt="Upcycling clothes">
                    <img src="{% static 'images/savvee.png' %}" alt="Saving items">
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 3. "Our Impact in Numbers" Section -->
<div class="section animate-on-scroll">
    <div class="container">
        <div class="text-center mb-5"><h2 class="section-title">Our Impact in Numbers</h2><p class="section-subtitle col-md-8 mx-auto">Every number represents a story of kindness and a step towards a better community.</p></div>
        <div class="row g-4 stat-item">
            <div class="col-md-4"><i class="bi bi-gift-fill"></i><h3>{{ donations_completed }}+</h3><p>Donations Fulfilled</p></div>
            <div class="col-md-4"><i class="bi bi-shield-check"></i><h3>{{ verified_ngos }}+</h3><p>Verified NGOs Partnered</p></div>
            <div class="col-md-4"><i class="bi bi-people-fill"></i><h3>{{ registered_donors }}+</h3><p>Generous Donors Joined</p></div>
        </div>
    </div>
</div>

<!-- 4. "How It Works" Section with Images -->
<div id="how-it-works" class="section section-bg animate-on-scroll">
    <div class="container">
        <div class="text-center mb-5"><h2 class="section-title">A Simple Path to a Big Impact</h2></div>
        <div class="row g-5">
            <div class="col-md-4">
                <div class="step-card content-card h-100 p-4">
                    <img src="{% static 'images/donate.png' %}" class="step-image" alt="Offer Your Item">
                    <h3>1. Offer Your Item</h3>
                    <p class="text-secondary">Quickly list any item you wish to donate, from clothes to books and beyond, in just a few clicks.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="step-card content-card h-100 p-4">
                    <img src="{% static 'images/images.jpg' %}" class="step-image" alt="Connect with an NGO">
                    <h3>2. Find a Local NGO</h3>
                    <p class="text-secondary">We show you verified NGOs in your area that need what you have to offer. You choose who to help.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="step-card content-card h-100 p-4">
                    <img src="{% static 'images/images (1).jpg' %}" class="step-image" alt="Arrange & Donate">
                    <h3>3. Arrange & Donate</h3>
                    <p class="text-secondary">Chat directly with the NGO to coordinate a smooth pickup or drop-off and see your impact firsthand.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 5. NGO of the Month Section -->
<div class="section ngo-of-the-month animate-on-scroll">
    <div class="container">
        <div class="row align-items-center g-5">
            <div class="col-lg-6"><span class="badge bg-light text-dark mb-3">NGO of the Month</span><h2 class="display-4 fw-bold">Forengers Foundation</h2><p class="lead mt-3">Forengers is a community of 800+ youngsters countering climate change one step at a time, from planting saplings to conducting massive cleanup drives across Pune.</p><div class="row mt-4"><div class="col-4 stat"><h3>3900+</h3><p>Saplings Planted</p></div><div class="col-4 stat"><h3>400+</h3><p>Bags of Garbage Collected</p></div><div class="col-4 stat"><h3>800+</h3><p>Volunteers</p></div></div><a href="#" class="btn btn-accent btn-lg mt-4">Learn More</a></div>
            <div class="col-lg-6"><img src="{% static 'images/ngo.jpg' %}" class="img-fluid rounded-3 shadow-lg" alt="Forengers Foundation team"></div>
        </div>
    </div>
</div>

<!-- 6. "Where We Operate" Section -->
<div class="section section-bg where-we-operate animate-on-scroll">
    <div class="container">
        <div class="row g-5 align-items-center">
            <div class="col-lg-7">
                <img src="https://i.imgur.com/8Yg1p2B.png" class="img-fluid" alt="Map of Pune">
            </div>
            <div class="col-lg-5">
                <h2 class="section-title text-primary">Where We Operate</h2>
                <p class="text-secondary mt-3">Our network is growing across Maharashtra to connect kindness locally. We are currently focusing our services in these major hubs:</p>
                <div class="row mt-4">
                    <div class="col-6"><ul class="list-unstyled"><li><i class="bi bi-geo-alt-fill me-2"></i> Pune</li><li><i class="bi bi-geo-alt-fill me-2"></i> Mumbai</li><li><i class="bi bi-geo-alt-fill me-2"></i> Nashik</li></ul></div>
                    <div class="col-6"><ul class="list-unstyled"><li><i class="bi bi-geo-alt-fill me-2"></i> Aurangabad</li><li><i class="bi bi-geo-alt-fill me-2"></i> Kolhapur</li><li><i class="bi bi-geo-alt-fill me-2"></i> Nagpur</li></ul></div>
                </div>
            </div>
        </div>
    </div>
</div>


<!-- 7. "Upcoming Events" Section -->
<div class="section animate-on-scroll">
    <div class="container">
        <div class="text-center mb-5"><h2 class="section-title">Upcoming Events</h2><p class="section-subtitle col-md-8 mx-auto">Join a local event to volunteer your time and connect with our community.</p></div>
        <div class="row g-4">
            {% for event in upcoming_events %}
            <div class="col-md-4"><div class="card content-card event-card h-100"><div class="card-body d-flex"><div class="me-3"><div class="card-date"><span class="day">{{ event.event_date|date:"d" }}</span><span class="month">{{ event.event_date|date:"M" }}</span></div></div><div class="flex-grow-1"><h5 class="card-title">{{ event.title }}</h5><p class="card-text mb-1"><small class="text-muted"><i class="bi bi-person-fill"></i> Hosted by: {{ event.ngo.ngoprofile.ngo_name }}</small></p><p class="card-text"><small class="text-muted"><i class="bi bi-geo-alt-fill"></i> {{ event.location }}</small></p><a href="#" class="btn btn-sm btn-outline-primary mt-2">Learn More</a></div></div></div></div>
            {% empty %}
            <div class="col-12"><div class="alert alert-light text-center border">There are no upcoming events scheduled right now.</div></div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- 8. Video Section (Single Video) -->
<div class="section section-bg video-section animate-on-scroll">
    <div class="container">
        <div class="text-center mb-5"><h2 class="section-title text-primary">See the Impact in Action</h2></div>
        <div class="row g-4 justify-content-center">
            <div class="col-lg-8"><div class="card content-card shadow-sm p-2"><video controls muted poster="{% static 'images/tree.jpg' %}"><source src="{% static 'videos/vid2.mp4' %}" type="video/mp4">Your browser does not support the video tag.</video></div></div>
        </div>
    </div>
</div>

<!-- 9. Success Stories Section -->
<div class="section animate-on-scroll">
    <div class="container">
        <div class="text-center mb-5"><h2 class="section-title">Stories of Kindness</h2></div>
        <div class="row g-4">
            <div class="col-md-4"><div class="card content-card story-card h-100"><img src="{% static 'images/food.jpg' %}" class="card-img-top" alt="Food donation"><div class="card-body p-4"><h5 class="card-title text-primary">Warm Meals, Full Hearts</h5><p class="card-text text-secondary">"We connected a local restaurant with surplus food to a nearby children's home..."</p><footer class="blockquote-footer mt-2">Kindway Impact Story</footer></div></div></div>
            <div class="col-md-4"><div class="card content-card story-card h-100"><img src="{% static 'images/education.jpg' %}" class="card-img-top" alt="Book donation"><div class="card-body p-4"><h5 class="card-title text-primary">Books for Bright Futures</h5><p class="card-text text-secondary">"Our dusty box of children's books found a new home at a learning center..."</p><footer class="blockquote-footer mt-2">Anjali R., Pune</footer></div></div></div>
            <div class="col-md-4"><div class="card content-card story-card h-100"><img src="{% static 'images/img.jpg' %}" class="card-img-top" alt="Volunteering story"><div class="card-body p-4"><h5 class="card-title text-primary">Volunteers Make the Difference</h5><p class="card-text text-secondary">"Through Kindway, we found volunteers for our cleanup drive. Their energy was inspiring."</p><footer class="blockquote-footer mt-2">Asha Foundation</footer></div></div></div>
        </div>
    </div>
</div>

<!-- 10. Contact Form Section -->
<div id="contact" class="section section-bg animate-on-scroll">
    <div class="container">
        <div class="text-center mb-5"><h2 class="section-title">Get in Touch</h2><p class="section-subtitle col-md-8 mx-auto">Have questions, feedback, or a partnership idea? Weâ€™d love to hear from you.</p></div>
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card content-card p-4 p-md-5">
                    <form method="POST" action="{% url 'index' %}#contact" novalidate>
                        {% csrf_token %}
                        <div class="row g-3">
                            <div class="col-md-6"><div class="form-floating">{% render_field contact_form.name class="form-control" placeholder="Your Name" %}<label for="{{ contact_form.name.id_for_label }}">Your Name</label></div></div>
                            <div class="col-md-6"><div class="form-floating">{% render_field contact_form.email class="form-control" placeholder="Your Email" %}<label for="{{ contact_form.email.id_for_label }}">Your Email</label></div></div>
                            <div class="col-12"><div class="form-floating">{% render_field contact_form.message class="form-control" placeholder="Your Message" style="height: 150px" %}<label for="{{ contact_form.message.id_for_label }}">Your Message</label></div></div>
                            <div class="col-12 text-center"><button type="submit" class="btn btn-primary btn-lg">Send Message</button></div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- 11. Final CTA Section -->
<div class="section cta-final-section text-center animate-on-scroll">
    <div class="container">
        <h2 class="display-4 fw-bold mb-4">Join the Movement of Kindness Today</h2>
        <p class="lead mb-4 col-md-8 mx-auto">Whether you're an individual with items to give or an organization in need, you have a place here. Let's build a better community, together.</p>
        <a href="{% url 'register_donor' %}" class="btn btn-accent btn-lg me-md-3 mb-3 mb-md-0">Become a Donor</a>
        <a href="{% url 'register_ngo' %}" class="btn btn-outline-light btn-lg">Register your NGO</a>
    </div>
</div>
{% endblock %}